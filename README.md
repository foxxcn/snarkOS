<p align="center">
    <img alt="snarkOS" width="1412" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjE2IiBoZWlnaHQ9IjgwIiB2aWV3Qm94PSIwIDAgMjE2IDgwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNzMuNDI2IDBWOC45MzgyNEg4MS42ODQyVjc4Ljg5NjFIOTAuNjA0NVYwSDczLjQyNloiIGZpbGw9IiNGNUY1RjUiLz4KPHBhdGggZD0iTTE1NC4xNDUgNTEuNDIxNkMxNTQuMTQ1IDMyLjU1MTggMTQzLjY4MyAyMS4yOTcgMTI3LjYwNCAyMS4yOTdDMTExLjUyNiAyMS4yOTcgMTAwLjk1NCAzMi4wMDA3IDEwMC45NTQgNTAuODY4N0MxMDAuOTU0IDY5LjczNjcgMTExLjQxNSA4MCAxMjcuNjA0IDgwQzE0MC4zNzggODAgMTQ5Ljk2IDcyLjYwNjEgMTUyLjYwMyA2Mi4zNDQ3SDE0Mi42OTJDMTQwLjQ4OCA2Ny4wOTAyIDEzNS45NzUgNzEuMjgyOSAxMjcuNjA0IDcxLjI4MjlDMTE2LjgxMiA3MS4yODI5IDExMS4zMDcgNjQuNDQxOSAxMTAuMjA1IDU0LjYyMDlIMTU0LjE0NVY1MS40MjE2Wk0xMTAuMzE2IDQ2LjEyNUMxMTEuNjM2IDM2LjYzNTcgMTE3LjM2NCAyOS45MDM1IDEyNy42MDQgMjkuOTAzNUMxMzcuODQ1IDI5LjkwMzUgMTQzLjI0MiAzNi41MjUxIDE0NC41NjQgNDYuMTI1SDExMC4zMTZaIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0xODkuMjcyIDIxLjI5N0MxNzMuMDgzIDIxLjI5NyAxNjIuNjIyIDMyLjAwMDcgMTYyLjYyMiA1MC44Njg3QzE2Mi42MjIgNjkuNzM2NyAxNzMuMDgzIDgwIDE4OS4yNzIgODBDMjA1LjQ2MSA4MCAyMTUuODEyIDcwLjA2ODQgMjE1LjgxMiA1MC44Njg3QzIxNS44MTIgMzEuNjY5IDIwNS4zNTEgMjEuMjk3IDE4OS4yNzIgMjEuMjk3Wk0xODkuMjcyIDcxLjUwNDFDMTc3LjcwOSA3MS41MDQxIDE3MS40MzIgNjIuNDU1MyAxNzEuNDMyIDUwLjc2QzE3MS40MzIgMzkuMDY0NyAxNzcuNzA5IDI5LjY4NDIgMTg5LjI3MiAyOS42ODQyQzIwMC44MzYgMjkuNjg0MiAyMDcuMDAzIDM4Ljg0MzYgMjA3LjAwMyA1MC43NkMyMDcuMDAzIDYyLjY3NjQgMjAwLjk0NiA3MS41MDQxIDE4OS4yNzIgNzEuNTA0MVoiIGZpbGw9IiNGNUY1RjUiLz4KPHBhdGggZD0iTTQ2LjU1NjUgMEgyOC4zODQ5TDEyLjYxMzQgNDYuMTI1SDIyLjIxNzlMMzQuOTkzMyA4LjQ5NTkzSDM5LjYxODlMNTIuMzkyNSA0Ni4xMjVIMjIuMjE3OUwxOS4yNDU3IDU0LjYyMDlINTUuMjU2MUw2My41MTQzIDc4Ljg5NjFINzMuNDI2TDQ2LjU1NjUgMFoiIGZpbGw9IiNGNUY1RjUiLz4KPHBhdGggZD0iTTEuNDA1MDggNzguODk2MUgxMC45ODU3TDE5LjI0NTcgNTQuNjIwOUw5LjcwNzQgNTQuNjIwOUwxLjQwNTA4IDc4Ljg5NjFaIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zLjA5MzUgNDYuMTI1TDAuMTg3NSA1NC42MjA5SDkuNzA3NEwxMi42MTM0IDQ2LjEyNUgzLjA5MzVaIiBmaWxsPSIjRjVGNUY1Ii8+Cjwvc3ZnPgo=">
</p>

<p align="center">
    <a href="https://circleci.com/gh/AleoHQ/snarkOS"><img src="https://circleci.com/gh/AleoHQ/snarkOS.svg?style=svg"></a>
    <a href="https://codecov.io/gh/AleoHQ/snarkOS"><img src="https://codecov.io/gh/AleoHQ/snarkOS/branch/master/graph/badge.svg?token=cck8tS9HpO"/></a>
    <a href="https://discord.gg/aleo"><img src="https://img.shields.io/discord/700454073459015690?logo=discord"/></a>
    <a href="https://twitter.com/AleoHQ"><img src="https://img.shields.io/twitter/follow/AleoHQ?style=social"/></a>
    <a href="https://GitHub.com/AleoHQ/snarkOS"><img src="https://img.shields.io/badge/contributors-59-ee8449"/></a>
</p>

## <a name='TableofContents'></a>目录

* [1. 概述](#1-overview)
* [2. 构建指南](#2-build-guide)
  * [2.1 要求](#21-requirements)
  * [2.2 安装](#22-installation)
* [3. 运行一个 Aleo 节点](#3-run-an-aleo-node)
  * [3.1 运行一个 Aleo 客户端](#31-run-an-aleo-client)
  * [3.2 运行一个 Aleo 证明器](#32-run-an-aleo-prover)
* [4. 常见问题解答](#4-faqs)
* [5. 命令行界面](#5-command-line-interface)
* [6. 开发指南](#6-development-guide)
  * [6.1 快速开始](#61-quick-start)
  * [6.2 操作](#62-operations)
* [7. 贡献者](#7-contributors)
* [8. 许可证](#8-license)

## 1. 概述

__snarkOS__ 是为零知识应用设计的去中心化操作系统。此代码构成了 [Aleo](https://aleo.org/) 网络的核心，该网络验证交易并以公开可验证的方式存储加密状态应用。

## 2. 构建指南

### 2.1 要求

以下是运行一个 Aleo 节点的**最低**要求：
 - **操作系统**：仅支持 64 位架构，出于安全考虑，请保持系统更新
    - 客户端：Ubuntu 22.04 (长期支持版)，macOS Ventura 或更高版本，Windows 11 或更高版本
    - 证明器：Ubuntu 22.04 (长期支持版)，macOS Ventura 或更高版本
    - 验证器：Ubuntu 22.04 (长期支持版)
 - **CPU**：仅支持 64 位架构
    - 客户端：16 核心
    - 证明器：32 核心（推荐 64 核心）
    - 验证器：32 核心（推荐 64 核心）
 - **内存**：DDR4 或更好
    - 客户端：16GB
    - 证明器：32GB（推荐 64GB 或更多）
    - 验证器：64GB（推荐 128GB 或更多）
 - **存储**：PCIe Gen 3 x4, PCIe Gen 4 x2 NVME SSD 或更好
    - 客户端：64GB 磁盘空间
    - 证明器：128GB 磁盘空间
    - 验证器：2TB 磁盘空间（推荐 4TB 或更多）
 - **网络**：对称的、商用的、常开的网络连接
    - 客户端：100Mbps 上行和下行带宽
    - 证明器：250Mbps 上行和下行带宽
    - 验证器：500Mbps 上行和下行带宽
- **GPU**：
    - 客户端：目前不需要
    - 证明器：支持 CUDA 的 GPU（可选）
    - 验证器：目前不需要

请注意，为了运行一个**有竞争力的** Aleo 证明器，机器将需要超过这些最低要求。

### 2.2 安装

在开始之前，请确保您的机器已安装 `Rust v1.66+`。[安装 Rust 的说明可以在这里找到](https://www.rust-lang.org/tools/install)。

首先克隆这个 GitHub 仓库：
```
git clone https://github.com/foxxcn/snarkOS.git --depth 1
```

接下来，进入 `snarkOS` 目录：
```
cd snarkOS
```

**[对于 Ubuntu 用户]**：有一个安装依赖的辅助脚本可用。从 `snarkOS`

 目录运行：
```
./build_ubuntu.sh
```

最后，安装 `snarkOS`：
```
cargo install --locked --path .
```

请确保您的路由器和操作系统防火墙已开放 `4130/tcp` 和 `3030/tcp` 端口。

## 3. 运行一个 Aleo 节点

### 3.1 运行一个 Aleo 客户端

首先按照[构建指南](#2-build-guide)中的说明开始。

接下来，要启动一个客户端节点，从 `snarkOS` 目录运行：
```
./run-client.sh
```

### 3.2 运行一个 Aleo 证明器

首先按照[构建指南](#2-build-guide)中的说明开始。

接下来，生成一个 Aleo 账户地址：
```
snarkos account new
```
这将在终端输出一个新的 Aleo 账户。

**请记住保存账户的私钥和查看密钥。** 下面是一个示例输出：
```
 注意 - 记得保存这个账户的私钥和查看密钥。

  私钥  APrivateKey1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  <-- 保存我并在下一步使用
  查看密钥  AViewKey1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  <-- 保存我
  地址  aleo1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  <-- 保存我
```

接下来，要启动一个证明节点，从 `snarkOS` 目录运行：
```
./run-prover.sh
```
当提示时，输入您的 Aleo 私钥：
```
输入 Aleo 证明器账户的私钥：
APrivateKey1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

## 4. 常见问题解答

### 1. 我的节点无法编译。

- 确保您的机器已安装 `Rust v1.66+`。[安装 Rust 的说明可以在这里找到](https://www.rust-lang.org/tools/install)。
- 如果编译过程中出现大的错误，请尝试运行 `cargo clean`。
- 确保使用 `./run-client.sh` 或 `./run-prover.sh` 启动 `snarkOS`。

### 2. 我的节点无法连接到网络上的节点。

- 确保您的路由器和操作系统防火墙已开放 `4130/tcp` 和 `3030/tcp` 端口。
- 确保使用 `./run-client.sh` 或 `./run-prover.sh` 启动 `snarkOS`。

### 3. 我无法生成新的地址

- 在运行上述命令（`snarkos account new`）之前，请尝试运行 `source ~/.bashrc`。
- 同时仔细检查 `snarkos` 的拼写。注意目录是 `/snarkOS`，而命令是 `snarkos`。

### 4. 如何使用命令行界面来签名和验证消息？

1. 如果您还没有，请使用 `snarkos account new` 生成一个账户。
2. 使用您的私钥签名消息：`snarkos account sign --raw -m "Message" --private-key-file=<PRIVATE_KEY_FILE>`
3. 使用 `snarkos account verify --raw -m "Message" -s sign1SignatureHere -a aleo1YourAccountAddress` 验证您的签名。

注意，使用命令中的 `--raw` 标志将以字节形式签名纯文本消息，而不是 [Aleo](https://developer.aleo.org/aleo/language#data-types-and-values) 中的值，如 `1u8` 或 `100field`。

## 5. 命令行界面

要使用自定义设置运行节点，请参考 `snarkOS` CLI 中可用的选项和标志。

可以通过 `snarkos --help` 查看 CLI 标志和选项的完整列表：
```
snarkOS 
Aleo 团队 <hello@aleo.org>

用法：
    snarkos [选项] <子命令>

选项：
    -h, --help

                     打印帮助信息
    -v, --verbosity <VERBOSITY>    指定详细级别 [选项：0, 1, 2, 3] [默认：2]

子命令：
    account    管理 Aleo 账户的命令
    clean      清理 snarkOS 节点存储
    help       打印此消息或给定子命令的帮助
    start      启动 snarkOS 节点
    update     更新 snarkOS
```

以下是 `snarkos start` 命令的选项：
```
用法：
    snarkos start [选项]

选项：
        --network <NETWORK_ID>                  指定此节点的网络 ID [默认：3]
        
        --validator                             指定此节点为验证器
        --prover                                指定此节点为证明器
        --client                                指定此节点为客户端
        
        --private-key <PRIVATE_KEY>             指定节点的账户私钥
        --private-key-file <PRIVATE_KEY_FILE>   指定包含节点账户私钥的文件路径
        
        --node <IP:PORT>                        指定节点服务器的 IP 地址和端口 [默认：0.0.0.0:4130]
        --connect <IP:PORT>                     指定要连接的对等节点的 IP 地址和端口
 
        --rest <REST>                           指定 REST 服务器的 IP 地址和端口 [默认：0.0.0.0:3030]
        --norest                                如果设置此标志，节点将不初始化 REST 服务器
        
        --nodisplay                             如果设置此标志，节点将不显示界面
        --verbosity <VERBOSITY_LEVEL>           指定节点的详细级别 [选项：0, 1, 2, 3] [默认：2]
        --logfile <PATH>                        指定日志文件的存储路径 [默认：/tmp/snarkos.log]
        
        --dev <NODE_ID>                         启用开发模式，为此节点指定一个唯一的 ID
```

## 6. 开发指南

### 6.1 快速开始

在第一个终端，通过运行以下命令启动第一个验证器：
```
cargo run --release -- start --nodisplay --dev 0 --validator
```
在第二个终端，通过运行以下命令启动第二个验证器：
```
cargo run --release -- start --nodisplay --dev 1 --validator
```
在第三个终端，通过运行以下命令启动第三个验证器：
```
cargo run --release -- start --nodisplay --dev 2 --validator
```
在第四个终端，通过运行以下命令启动第四个验证器：
```
cargo run --release -- start --nodisplay --dev 3 --validator
```

从这里开始，此程序可以用于进一步启动证明器和客户端。

### 6.2 操作

初始化节点时，重要的是从 `0` 开始，并为每个新节点递增 `1`。

以下是初始化节点的选项列表（将 `<NODE_ID>` 替换为从 `0` 开始的数字）：
```
cargo run --release -- start --nodisplay --dev <NODE_ID> --validator
cargo run --release -- start --nodisplay --dev <NODE_ID> --prover
cargo run --release -- start --nodisplay --dev <NODE_ID> --client
cargo run --release -- start --nodisplay --dev <NODE_ID>
```

当没有指定节点类型时，节点将默认为 `--client`。

### 6.3 本地开发网络

#### 6.3.1 安装 `tmux`

要使用脚本运行本地开发网络，请先安装 `tmux`。

<details><summary>macOS</summary>

在 macOS 上安装 `tmux`，您可以使用 `Homebrew` 包管理器。
如果您还没有安装 `Homebrew`，您可以在[他们的网站](https://brew.sh/)找到安装说明。
```bash
# 安装 Homebrew 后，运行：
brew install

 tmux
```

</details>

<details><summary>Ubuntu</summary>

在 Ubuntu 和其他基于 Debian 的系统上，您可以使用 `apt` 包管理器：
```bash
sudo apt update
sudo apt install tmux
```

</details>

<details><summary>Windows</summary>

在 Windows 上使用 `tmux` 有几种方式：

### 使用 Windows 子系统 for Linux (WSL)

1. 首先，安装 [Windows 子系统 for Linux](https://docs.microsoft.com/en-us/windows/wsl/install)。
2. 一旦 WSL 设置完毕并且您安装了 Linux 发行版（例如 Ubuntu），打开您的 WSL 终端并安装 `tmux`，就像在本地 Linux 系统上一样：
```bash
sudo apt update
sudo apt install tmux
```

</details>

#### 6.3.2 启动本地开发网络

要启动本地开发网络，请运行：
```
./devnet.sh
```
按照终端中的说明启动开发网络。

#### 6.3.3 查看本地开发网络

#### 切换节点（向前）

要在本地开发网络中切换到下一个节点，请运行：
```
Ctrl+b n
```

#### 切换节点（向后）

要在本地开发网络中切换到上一个节点，请运行：
```
Ctrl+b p
```

#### 选择节点（choose-tree）

要在本地开发网络中选择一个节点，请运行：
```
Ctrl+b w
```

#### 手动选择节点

要在本地开发网络中手动选择一个节点，请运行：
```
Ctrl+b :select-window -t {NODE_ID}
```

#### 6.3.4 停止本地开发网络

要停止本地开发网络，请运行：
```
Ctrl+b :kill-session
```
然后按 `Enter`。

### 清理

要清理节点存储，请运行：
```
cargo run --release -- clean --dev <NODE_ID>
```

## 7. 贡献者
感谢您帮助使 snarkOS 更好！  
[🧐 表情符号意味着什么？](https://allcontributors.org/docs/en/emoji-key)

## 8. 许可证

我们欢迎对 `snarkOS` 的所有贡献。请参考[许可证](#7-license)条款了解贡献的具体规定。

[![许可证: GPL v3](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](./LICENSE.md)